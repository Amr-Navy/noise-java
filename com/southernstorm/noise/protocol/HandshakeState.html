<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_101) on Sat Jul 09 09:50:22 AEST 2016 -->
<title>HandshakeState (Noise-Java)</title>
<meta name="date" content="2016-07-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HandshakeState (Noise-Java)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../com/southernstorm/noise/protocol/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/southernstorm/noise/protocol/Noise.html" title="class in com.southernstorm.noise.protocol"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/southernstorm/noise/protocol/HandshakeState.html" target="_top">Frames</a></li>
<li><a href="HandshakeState.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.southernstorm.noise.protocol</div>
<h2 title="Class HandshakeState" class="title">Class HandshakeState</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.southernstorm.noise.protocol.HandshakeState</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/southernstorm/noise/protocol/Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">HandshakeState</span>
extends java.lang.Object
implements <a href="../../../../com/southernstorm/noise/protocol/Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a></pre>
<div class="block">Interface to a Noise handshake.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#COMPLETE">COMPLETE</a></strong></code>
<div class="block">The handshake is complete and the data session ciphers
 have been split() out successfully.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#FAILED">FAILED</a></strong></code>
<div class="block">The handshake has failed due to some kind of error.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#INITIATOR">INITIATOR</a></strong></code>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the initiator role.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#NO_ACTION">NO_ACTION</a></strong></code>
<div class="block">No action is required of the application yet because the
 handshake has not started.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#READ_MESSAGE">READ_MESSAGE</a></strong></code>
<div class="block">The HandshakeState expects the application to read the
 next message payload from the handshake.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#RESPONDER">RESPONDER</a></strong></code>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the responder role.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#SPLIT">SPLIT</a></strong></code>
<div class="block">The handshake is over and the application is expected to call
 split() and begin data session communications.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#WRITE_MESSAGE">WRITE_MESSAGE</a></strong></code>
<div class="block">The HandshakeState expects the application to write the
 next message payload for the handshake.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#HandshakeState(java.lang.String,%20int)">HandshakeState</a></strong>(java.lang.String&nbsp;protocolName,
              int&nbsp;role)</code>
<div class="block">Creates a new Noise handshake.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#destroy()">destroy</a></strong>()</code>
<div class="block">Destroys all sensitive state in the current object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#fallback()">fallback</a></strong>()</code>
<div class="block">Falls back to the "XXfallback" handshake pattern.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#fallback(java.lang.String)">fallback</a></strong>(java.lang.String&nbsp;patternName)</code>
<div class="block">Falls back to another handshake pattern.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getAction()">getAction</a></strong>()</code>
<div class="block">Gets the next action that the application should perform for
 the handshake part of the protocol.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getFixedEphemeralKey()">getFixedEphemeralKey</a></strong>()</code>
<div class="block">Gets the DHState object containing a fixed local ephemeral
 key value for this handshake.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getHandshakeHash()">getHandshakeHash</a></strong>()</code>
<div class="block">Gets the current value of the handshake hash.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getLocalKeyPair()">getLocalKeyPair</a></strong>()</code>
<div class="block">Gets the keypair object for the local static key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getProtocolName()">getProtocolName</a></strong>()</code>
<div class="block">Gets the name of the Noise protocol.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getRemotePublicKey()">getRemotePublicKey</a></strong>()</code>
<div class="block">Gets the public key object for the remote static key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getRole()">getRole</a></strong>()</code>
<div class="block">Gets the role for this handshake.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#hasLocalKeyPair()">hasLocalKeyPair</a></strong>()</code>
<div class="block">Determine if this handshake has already been configured
 with a local static key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#hasPreSharedKey()">hasPreSharedKey</a></strong>()</code>
<div class="block">Determine if this object has already been configured with a
 pre-shared key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#hasRemotePublicKey()">hasRemotePublicKey</a></strong>()</code>
<div class="block">Determine if this handshake has already been configured
 with a remote static key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#needsLocalKeyPair()">needsLocalKeyPair</a></strong>()</code>
<div class="block">Determine if this handshake requires a local static key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#needsPreSharedKey()">needsPreSharedKey</a></strong>()</code>
<div class="block">Determine if this handshake needs a pre-shared key value
 and one has not been configured yet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#needsRemotePublicKey()">needsRemotePublicKey</a></strong>()</code>
<div class="block">Determine if this handshake requires a remote static key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#readMessage(byte[],%20int,%20int,%20byte[],%20int)">readMessage</a></strong>(byte[]&nbsp;message,
           int&nbsp;messageOffset,
           int&nbsp;messageLength,
           byte[]&nbsp;payload,
           int&nbsp;payloadOffset)</code>
<div class="block">Reads a message payload during the handshake.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#setPreSharedKey(byte[],%20int,%20int)">setPreSharedKey</a></strong>(byte[]&nbsp;key,
               int&nbsp;offset,
               int&nbsp;length)</code>
<div class="block">Sets the pre-shared key for this handshake.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#setPrologue(byte[],%20int,%20int)">setPrologue</a></strong>(byte[]&nbsp;prologue,
           int&nbsp;offset,
           int&nbsp;length)</code>
<div class="block">Sets the prologue for this handshake.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/southernstorm/noise/protocol/CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#split()">split</a></strong>()</code>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeState object once the handshake completes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/southernstorm/noise/protocol/CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#split(byte[],%20int,%20int)">split</a></strong>(byte[]&nbsp;secondaryKey,
     int&nbsp;offset,
     int&nbsp;length)</code>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeObject after mixing in a secondary symmetric key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#start()">start</a></strong>()</code>
<div class="block">Starts the handshake running.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#writeMessage(byte[],%20int,%20byte[],%20int,%20int)">writeMessage</a></strong>(byte[]&nbsp;message,
            int&nbsp;messageOffset,
            byte[]&nbsp;payload,
            int&nbsp;payloadOffset,
            int&nbsp;payloadLength)</code>
<div class="block">Writes a message payload during the handshake.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INITIATOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INITIATOR</h4>
<pre>public static final&nbsp;int INITIATOR</pre>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the initiator role.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.INITIATOR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="RESPONDER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RESPONDER</h4>
<pre>public static final&nbsp;int RESPONDER</pre>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the responder role.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.RESPONDER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NO_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_ACTION</h4>
<pre>public static final&nbsp;int NO_ACTION</pre>
<div class="block">No action is required of the application yet because the
 handshake has not started.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.NO_ACTION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="WRITE_MESSAGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_MESSAGE</h4>
<pre>public static final&nbsp;int WRITE_MESSAGE</pre>
<div class="block">The HandshakeState expects the application to write the
 next message payload for the handshake.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.WRITE_MESSAGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="READ_MESSAGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_MESSAGE</h4>
<pre>public static final&nbsp;int READ_MESSAGE</pre>
<div class="block">The HandshakeState expects the application to read the
 next message payload from the handshake.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.READ_MESSAGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FAILED</h4>
<pre>public static final&nbsp;int FAILED</pre>
<div class="block">The handshake has failed due to some kind of error.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="SPLIT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SPLIT</h4>
<pre>public static final&nbsp;int SPLIT</pre>
<div class="block">The handshake is over and the application is expected to call
 split() and begin data session communications.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.SPLIT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="COMPLETE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>COMPLETE</h4>
<pre>public static final&nbsp;int COMPLETE</pre>
<div class="block">The handshake is complete and the data session ciphers
 have been split() out successfully.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.COMPLETE">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HandshakeState(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HandshakeState</h4>
<pre>public&nbsp;HandshakeState(java.lang.String&nbsp;protocolName,
              int&nbsp;role)
               throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Creates a new Noise handshake.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>protocolName</code> - The name of the Noise protocol.</dd><dd><code>role</code> - The role, HandshakeState.INITIATOR or HandshakeState.RESPONDER.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - The protocolName is not
 formatted correctly, or the role is not recognized.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - One of the cryptographic algorithms
 that is specified in the protocolName is not supported.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getProtocolName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProtocolName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getProtocolName()</pre>
<div class="block">Gets the name of the Noise protocol.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The protocol name.</dd></dl>
</li>
</ul>
<a name="getRole()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRole</h4>
<pre>public&nbsp;int&nbsp;getRole()</pre>
<div class="block">Gets the role for this handshake.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The role, HandshakeState.INITIATOR or HandshakeState.RESPONDER.</dd></dl>
</li>
</ul>
<a name="needsPreSharedKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsPreSharedKey</h4>
<pre>public&nbsp;boolean&nbsp;needsPreSharedKey()</pre>
<div class="block">Determine if this handshake needs a pre-shared key value
 and one has not been configured yet.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a pre-shared key is needed; false if not.</dd></dl>
</li>
</ul>
<a name="hasPreSharedKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasPreSharedKey</h4>
<pre>public&nbsp;boolean&nbsp;hasPreSharedKey()</pre>
<div class="block">Determine if this object has already been configured with a
 pre-shared key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the pre-shared key has already been configured;
 false if one is not needed or it has not been configured yet.</dd></dl>
</li>
</ul>
<a name="setPreSharedKey(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPreSharedKey</h4>
<pre>public&nbsp;void&nbsp;setPreSharedKey(byte[]&nbsp;key,
                   int&nbsp;offset,
                   int&nbsp;length)</pre>
<div class="block">Sets the pre-shared key for this handshake.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - Buffer containing the pre-shared key value.</dd><dd><code>offset</code> - Offset into the buffer of the first byte of the key.</dd><dd><code>length</code> - The length of the pre-shared key, which must be 32.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - The length is not 32.</dd>
<dd><code>java.lang.UnsupportedOperationException</code> - Pre-shared keys are not
 supported for this handshake type.</dd>
<dd><code>java.lang.IllegalStateException</code> - The handshake has already started,
 so the pre-shared key can no longer be set.</dd></dl>
</li>
</ul>
<a name="setPrologue(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPrologue</h4>
<pre>public&nbsp;void&nbsp;setPrologue(byte[]&nbsp;prologue,
               int&nbsp;offset,
               int&nbsp;length)</pre>
<div class="block">Sets the prologue for this handshake.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>prologue</code> - Buffer containing the prologue value.</dd><dd><code>offset</code> - Offset into the buffer of the first byte of the prologue.</dd><dd><code>length</code> - The length of the prologue in bytes.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The handshake has already started,
 so the prologue can no longer be set.</dd></dl>
</li>
</ul>
<a name="getLocalKeyPair()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalKeyPair</h4>
<pre>public&nbsp;<a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a>&nbsp;getLocalKeyPair()</pre>
<div class="block">Gets the keypair object for the local static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The keypair, or null if a local static key is not required.</dd></dl>
</li>
</ul>
<a name="needsLocalKeyPair()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsLocalKeyPair</h4>
<pre>public&nbsp;boolean&nbsp;needsLocalKeyPair()</pre>
<div class="block">Determine if this handshake requires a local static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a local static key is needed; false if not.
 
 If the local static key has already been set, then this function
 will return false.</dd></dl>
</li>
</ul>
<a name="hasLocalKeyPair()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasLocalKeyPair</h4>
<pre>public&nbsp;boolean&nbsp;hasLocalKeyPair()</pre>
<div class="block">Determine if this handshake has already been configured
 with a local static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the local static key has been configured;
 false if not.</dd></dl>
</li>
</ul>
<a name="getRemotePublicKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemotePublicKey</h4>
<pre>public&nbsp;<a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a>&nbsp;getRemotePublicKey()</pre>
<div class="block">Gets the public key object for the remote static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The public key, or null if a remote static key
 is not required.</dd></dl>
</li>
</ul>
<a name="needsRemotePublicKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsRemotePublicKey</h4>
<pre>public&nbsp;boolean&nbsp;needsRemotePublicKey()</pre>
<div class="block">Determine if this handshake requires a remote static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a remote static key is needed; false if not.
 
 If the remote static key has already been set, then this function
 will return false.</dd></dl>
</li>
</ul>
<a name="hasRemotePublicKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasRemotePublicKey</h4>
<pre>public&nbsp;boolean&nbsp;hasRemotePublicKey()</pre>
<div class="block">Determine if this handshake has already been configured
 with a remote static key.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the remote static key has been configured;
 false if not.</dd></dl>
</li>
</ul>
<a name="getFixedEphemeralKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFixedEphemeralKey</h4>
<pre>public&nbsp;<a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a>&nbsp;getFixedEphemeralKey()</pre>
<div class="block">Gets the DHState object containing a fixed local ephemeral
 key value for this handshake.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The fixed ephemeral key object, or null if a local
 ephemeral key is not required by this handshake.
 
 This function is intended for testing only.  It can be used
 to establish a fixed ephemeral key for test vectors.  This
 function should not be used in real applications.</dd></dl>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">Starts the handshake running.
 
 This function is called after all of the handshake parameters have been
 provided to the HandshakeState object.  This function should be followed
 by calls to writeMessage() or readMessage() to process the handshake
 messages.  The getAction() function indicates the action to take next.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The handshake has already started, or one or
 more of the required parameters has not been supplied.</dd>
<dd><code>java.lang.UnsupportedOperationException</code> - An attempt was made to start a
 fallback handshake pattern without first calling fallback() on a
 previous handshake.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getAction()"><code>getAction()</code></a>, 
<a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#writeMessage(byte[],%20int,%20byte[],%20int,%20int)"><code>writeMessage(byte[], int, byte[], int, int)</code></a>, 
<a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#readMessage(byte[],%20int,%20int,%20byte[],%20int)"><code>readMessage(byte[], int, int, byte[], int)</code></a>, 
<a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#fallback()"><code>fallback()</code></a></dd></dl>
</li>
</ul>
<a name="fallback()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fallback</h4>
<pre>public&nbsp;void&nbsp;fallback()
              throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Falls back to the "XXfallback" handshake pattern.
 
 This function is intended used to help implement the "Noise Pipes" protocol.
 It resets a HandshakeState object with the original handshake pattern
 (usually "IK"), converting it into an object with the handshake pattern
 "XXfallback".  Information from the previous session such as the local
 keypair, the initiator's ephemeral key, the prologue value, and the
 pre-shared key, are passed to the new session.

 Once the fallback has been initiated, the application can set
 new values for the handshake parameters if the values from the
 previous session do not apply.  For example, the application may
 use a different prologue for the fallback than for the original
 session.

 After setting any new parameters, the application calls start()
 again to restart the handshake from where it left off before the fallback.

 Note that this function reverses the roles of initiator and responder.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.UnsupportedOperationException</code> - The current handshake pattern
 is not compatible with "XXfallback".</dd>
<dd><code>java.lang.IllegalStateException</code> - The previous protocol has not started
 or it has not reached the fallback position yet.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - One of the cryptographic algorithms
 that is specified in the new protocolName is not supported.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#start()"><code>start()</code></a></dd></dl>
</li>
</ul>
<a name="fallback(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fallback</h4>
<pre>public&nbsp;void&nbsp;fallback(java.lang.String&nbsp;patternName)
              throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Falls back to another handshake pattern.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>patternName</code> - The name of the pattern to fall back to;
 e.g. "XXfallback", "NXfallback", etc.
 
 This function resets a HandshakeState object with the original
 handshake pattern, and converts it into an object with the new handshake
 patternName.  Information from the previous session such as the local
 keypair, the initiator's ephemeral key, the prologue value, and the
 pre-shared key, are passed to the new session.

 Once the fallback has been initiated, the application can set
 new values for the handshake parameters if the values from the
 previous session do not apply.  For example, the application may
 use a different prologue for the fallback than for the original
 session.

 After setting any new parameters, the application calls start()
 again to restart the handshake from where it left off before the fallback.

 The new pattern may have greater key requirements than the original;
 for example changing from "NK" from "XXfallback" requires that the
 initiator's static public key be set.  The application is responsible for
 setting any extra keys before calling start().

 Note that this function reverses the roles of initiator and responder.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.UnsupportedOperationException</code> - The current handshake pattern
 is not compatible with the patternName, or patternName is not a
 fallback pattern.</dd>
<dd><code>java.lang.IllegalStateException</code> - The previous protocol has not started
 or it has not reached the fallback position yet.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - One of the cryptographic algorithms
 that is specified in the new protocolName is not supported.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#start()"><code>start()</code></a></dd></dl>
</li>
</ul>
<a name="getAction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAction</h4>
<pre>public&nbsp;int&nbsp;getAction()</pre>
<div class="block">Gets the next action that the application should perform for
 the handshake part of the protocol.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>One of HandshakeState.NO_ACTION, HandshakeState.WRITE_MESSAGE,
 HandshakeState.READ_MESSAGE, HandshakeState.SPLIT, or
 HandshakeState.FAILED.</dd></dl>
</li>
</ul>
<a name="writeMessage(byte[], int, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeMessage</h4>
<pre>public&nbsp;int&nbsp;writeMessage(byte[]&nbsp;message,
               int&nbsp;messageOffset,
               byte[]&nbsp;payload,
               int&nbsp;payloadOffset,
               int&nbsp;payloadLength)
                 throws javax.crypto.ShortBufferException</pre>
<div class="block">Writes a message payload during the handshake.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - The buffer that will be populated with the
 handshake packet to be written to the transport.</dd><dd><code>messageOffset</code> - First offset within the message buffer
 to be populated.</dd><dd><code>payload</code> - Buffer containing the payload to add to the
 handshake message; can be null if there is no payload.</dd><dd><code>payloadOffset</code> - Offset into the payload buffer of the
 first payload buffer.</dd><dd><code>payloadLength</code> - Length of the payload in bytes.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The length of the data written to the message buffer.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The action is not WRITE_MESSAGE.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - The payload is null, but
 payloadOffset or payloadLength is non-zero.</dd>
<dd><code>javax.crypto.ShortBufferException</code> - The message buffer does not have
 enough space for the handshake message.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getAction()"><code>getAction()</code></a>, 
<a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#readMessage(byte[],%20int,%20int,%20byte[],%20int)"><code>readMessage(byte[], int, int, byte[], int)</code></a></dd></dl>
</li>
</ul>
<a name="readMessage(byte[], int, int, byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readMessage</h4>
<pre>public&nbsp;int&nbsp;readMessage(byte[]&nbsp;message,
              int&nbsp;messageOffset,
              int&nbsp;messageLength,
              byte[]&nbsp;payload,
              int&nbsp;payloadOffset)
                throws javax.crypto.ShortBufferException,
                       javax.crypto.BadPaddingException</pre>
<div class="block">Reads a message payload during the handshake.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Buffer containing the incoming handshake
 that was read from the transport.</dd><dd><code>messageOffset</code> - Offset of the first message byte.</dd><dd><code>messageLength</code> - The length of the incoming message.</dd><dd><code>payload</code> - Buffer that will be populated with the message payload.</dd><dd><code>payloadOffset</code> - Offset of the first byte in the
 payload buffer to be populated with payload data.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The length of the payload.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The action is not READ_MESSAGE.</dd>
<dd><code>javax.crypto.ShortBufferException</code> - The message buffer does not have
 sufficient bytes for a valid message or the payload buffer does
 not have enough space for the decrypted payload.</dd>
<dd><code>javax.crypto.BadPaddingException</code> - A MAC value in the message failed
 to verify.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#getAction()"><code>getAction()</code></a>, 
<a href="../../../../com/southernstorm/noise/protocol/HandshakeState.html#writeMessage(byte[],%20int,%20byte[],%20int,%20int)"><code>writeMessage(byte[], int, byte[], int, int)</code></a></dd></dl>
</li>
</ul>
<a name="split()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>split</h4>
<pre>public&nbsp;<a href="../../../../com/southernstorm/noise/protocol/CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a>&nbsp;split()</pre>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeState object once the handshake completes.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The pair of ciphers for sending and receiving.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The action is not SPLIT.</dd></dl>
</li>
</ul>
<a name="split(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>split</h4>
<pre>public&nbsp;<a href="../../../../com/southernstorm/noise/protocol/CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a>&nbsp;split(byte[]&nbsp;secondaryKey,
                    int&nbsp;offset,
                    int&nbsp;length)</pre>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeObject after mixing in a secondary symmetric key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>secondaryKey</code> - The buffer containing the secondary key.</dd><dd><code>offset</code> - The offset of the first secondary key byte.</dd><dd><code>length</code> - The length of the secondary key in bytes, which
 must be either 0 or 32.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The pair of ciphers for sending and receiving.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The action is not SPLIT.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - The length is not 0 or 32.</dd></dl>
</li>
</ul>
<a name="getHandshakeHash()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHandshakeHash</h4>
<pre>public&nbsp;byte[]&nbsp;getHandshakeHash()</pre>
<div class="block">Gets the current value of the handshake hash.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The handshake hash.  This must not be modified by the caller.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - The action is not SPLIT or COMPLETE.</dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/southernstorm/noise/protocol/Destroyable.html#destroy()">Destroyable</a></code></strong></div>
<div class="block">Destroys all sensitive state in the current object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/southernstorm/noise/protocol/Destroyable.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/southernstorm/noise/protocol/Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../com/southernstorm/noise/protocol/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/southernstorm/noise/protocol/DHState.html" title="interface in com.southernstorm.noise.protocol"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/southernstorm/noise/protocol/Noise.html" title="class in com.southernstorm.noise.protocol"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/southernstorm/noise/protocol/HandshakeState.html" target="_top">Frames</a></li>
<li><a href="HandshakeState.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
